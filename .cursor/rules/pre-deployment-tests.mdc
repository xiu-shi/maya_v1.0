---
description: Always run pre-deployment tests before deploying
alwaysApply: true
---

# Pre-Deployment Testing Requirement

**CRITICAL**: Before ANY deployment, you MUST run pre-deployment tests first.

## Required Workflow

1. **Run Pre-Deployment Tests FIRST**:
   ```bash
   ./Maya/tests/deployment_tests/run-pre-deployment-tests.sh
   ```

2. **Wait for ALL tests to pass**:
   - System Prompt Validation: MUST PASS
   - System Instruction Loading: MUST PASS
   - Deployment API Validation: MUST PASS

3. **Only THEN proceed with deployment**:
   ```bash
   ./DEPLOY_WITH_ENV_VAR.sh YOUR_API_KEY
   ```

## What NOT to Do

❌ **NEVER** deploy without running tests first  
❌ **NEVER** skip the test step even if deployment seems urgent  
❌ **NEVER** assume tests will pass - always verify

## What to Do

✅ **ALWAYS** run `./Maya/tests/deployment_tests/run-pre-deployment-tests.sh` before deploying  
✅ **ALWAYS** wait for all tests to pass before proceeding  
✅ **ALWAYS** show test results to the user before deploying

## If Tests Fail

If pre-deployment tests fail:
1. **STOP** - Do not deploy
2. Fix the failing tests
3. Re-run tests until all pass
4. Only then proceed with deployment

---

**Remember**: Tests exist to prevent broken deployments. Running them first saves time and prevents production issues.
